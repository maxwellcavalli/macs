services:
  api:
    environment:
      API_KEY: ${API_KEY}
      ARTIFACTS_DIR: /app/artifacts
      BANDIT_STORE_PATH: /app/data/bandit.jsonl
      RL_BURST: "15"
      RL_RPS: "5"
      SSE_EARLY_EXIT_ENABLED: "1"
      SSE_EARLY_EXIT_ACCEPT_ONLY: "1"
      SSE_EARLY_EXIT_DIAGNOSTIC: "0"
      SSE_EARLY_EXIT_PATH_HINTS: stream,events
      SSE_EARLY_EXIT_REQUIRE_ID: "1"
      BANDIT_HOOK_DEBUG: "1"   # <â€” add this for extra logs
    volumes:
      - ./data:/app/data
      - ./artifacts:/app/artifacts
