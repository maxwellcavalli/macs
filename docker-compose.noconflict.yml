version: "3.9"
name: macs

services:
  api:
    # move host port if 8080 is busy
    ports:
      - "${API_BIND_IP:-127.0.0.1}:${API_PORT:-8080}:8080"

  ollama:
    # keep default but allow easy change if you already run Ollama locally
    ports:
      - "${OLLAMA_BIND_IP:-127.0.0.1}:${OLLAMA_PORT:-11434}:11434"
    # your base file already reserves NVIDIA GPUs via deploy->resources; leave it as-is.

  postgres:
    # avoid 5432 clashes on the host by default
    ports:
      - "${PG_BIND_IP:-127.0.0.1}:${PG_PORT:-55432}:5432"

  grafana:
    # avoid the common 3000 conflict by default
    ports:
      - "${GRAFANA_BIND_IP:-127.0.0.1}:${GRAFANA_PORT:-33000}:3000"

  prometheus:
    # avoid the common 9090 conflict by default
    ports:
      - "${PROM_BIND_IP:-127.0.0.1}:${PROM_PORT:-39090}:9090"
